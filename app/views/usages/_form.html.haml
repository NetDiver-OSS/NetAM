= form_with(model: [@section, usage], local: true) do |form|
  - usage[:ip_used] = @section.request_unused_ip if params[:request_ip] == 'true'
  - usage[:ip_used] = params[:ip] unless params[:ip].nil?
  %div.card-body
    - if usage.errors.any?
      - usage.errors.full_messages.each do |message|
        %div{class: "callout callout-danger #{'bg-dark text-white' if dark_mode?}"}
          %p= message
    %div.row
      %div.col-4
        %div.form-group
          = form.label :fqdn
          = form.text_field :fqdn, class: "form-control #{'bg-dark text-white' if dark_mode?}"
      %div.col-4
        %div.form-group
          = form.label :ip_used
          = form.text_field :ip_used, class: "form-control #{'bg-dark text-white' if dark_mode?}"
      %div.col-4
        %div.form-group
          = form.label :state
          = form.select :state, [:locked, :actived, :down, :dhcp], {}, {class: "form-control #{'bg-dark text-white' if dark_mode?}"}

    %div.row
      %div.col-12
        %div.form-group
          = form.label :description
          = form.text_area :description, placeholder: _('Description'), class: "form-control #{'bg-dark text-white' if dark_mode?}", rows: "5"

  %div.card-footer
    = form.submit nil, class: 'btn btn-primary float-right'
