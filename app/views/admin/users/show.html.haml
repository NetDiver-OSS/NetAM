- page_title "User: #{@user.email}"
%div.row
  %div.col-md-3
    %div{class: "card #{'bg-dark text-white' if dark_mode?}"}
      %div.card-body.box-profile
        %h3.profile-username.text-center= @user.email
        %p.text-muted.text-center ##{@user.id}

  %div.col-md-9
    - %w[SectionsController].each do |controller|
      %div{class: "card #{'bg-dark text-white' if dark_mode?}"}
        %div.card-header
          %h3.card-title= controller.to_s

        %div.card-body
          %table.table.table-responsive.datatable
            %thead
              %tr
                %th Section
                - controller.constantize.action_methods.sort.each do |method|
                  %th= method
            %tbody
              - controller.to_s.gsub('sController', '').constantize.all.each do |model|
                %tr
                  %th= model.name
                  - controller.constantize.action_methods.sort.each do |method|
                    %td
                      - if Ability.new(@user).can? method.to_sym, model
                        %span.badge.bg-success YES
                      - else
                        %span.badge.bg-danger NO
