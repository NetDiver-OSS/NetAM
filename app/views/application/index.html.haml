- page_title _('Homepage')

%h3= _('NetAM control node')
%div.row.mb-3
  %div.col-12.col-sm-6.col-md-3
    %div.card
      %div.card-body.text-center
        %h5.card-title= @master_node[:cpu].length
        %p.card-text= _('CPU')

  %div.col-12.col-sm-6.col-md-3
    %div.card
      %div.card-body.text-center
        %h5.card-title #{number_to_human_size(@master_node[:memory].active_bytes)} / #{number_to_human_size(@master_node[:memory].total_bytes)}
        %p.card-text= _('Memory')

  %div.col-12.col-sm-6.col-md-3
    %div.card
      %div.card-body.text-center
        %h5.card-title #{number_to_human(@master_node[:load_average].one_minute)} / #{number_to_human(@master_node[:load_average].five_minutes)} / #{number_to_human(@master_node[:load_average].fifteen_minutes)}
        %p.card-text= _('Load Average')

  %div.col-12.col-sm-6.col-md-3
    %div.card
      %div.card-body.text-center
        %h5.card-title= distance_of_time_in_words(@master_node[:boot_time], Time.now)
        %p.card-text= _('Boot time')

%h3= _('NetAM agent node')
%table.table.table-striped
  %thead
    %tr
      %th= _('Worker name')
      %th= _('Hostname')
      %th= _('Concurrency jobs')
      %th= _('Busy jobs')
      %th= _('Queues')
      %th= _('Started from')
      %th= _('Heartbeat')

  %tbody
    - @sidekiq_processes.each do |process|
      %tr
        %td= process[:worker]
        %td= process[:hostname]
        %td= process[:concurrency]
        %td= process[:busy]
        %td= process[:queues].join(' | ')
        %td= distance_of_time_in_words(process[:started_at], Time.now)
        %td= distance_of_time_in_words(process[:beat], Time.now)

